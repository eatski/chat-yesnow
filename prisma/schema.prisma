generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("SUPABASE_POSTGRES_PRISMA_URL")
  directUrl         = env("SUPABASE_POSTGRES_URL_NON_POOLING")
  shadowDatabaseUrl = env("SUPABASE_POSTGRES_URL_NON_POOLING") 
}

model Story {
  id                Int              @id @default(autoincrement())
  authorEmail       String
  title             String
  quiz              String
  truth             String
  simpleTruth       String
  questionExamples  QuestionExample[]
  draft             Boolean          @default(true)
  createdAt         DateTime         @default(now())
}

model QuestionExample {
  id                Int              @id @default(autoincrement())
  storyId           Int
  question          String
  answer            Answer
  supplement        String
  Story             Story            @relation(fields: [storyId], references: [id], onDelete: Cascade)

  @@index([storyId], name: "idx_story")
}

enum Answer {
  True
  False
  Unknown
  Invalid
}
